@model Modelo.ImprimirFactura_VM

@{
    Layout = null;
    decimal total = 0;
    decimal totalSinImpuesto = 0;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ImprimirVenta</title>
    <style>
        .contenedor {
            width: 900px !important;
            height: 842px !important;
            margin: auto;
        }

        body {
            font-family: Arial, Helvetica, sans-serif
        }

        p.title {
            font-weight: bold;
        }

        p.title2 {
            font-weight: bold;
            color: #4e73df;
            font-size: 20px;
        }

        p.text {
            font-size: 15px;
            font-weight: 100;
            color: #858585;
        }

        p {
            margin: 0px
        }

        .tbth {
            text-align: left;
        }

        table.tbproductos {
            border-collapse: separate;
            border-spacing: 4px;
        }

            table.tbproductos thead tr th {
                background-color: #4e73df;
                padding: 10px;
                font-size: 15px;
                color: white;
            }

            table.tbproductos tbody tr td {
                padding: 10px;
            }

        .item {
            font-size: 15px;
            font-weight: 100;
            color: #4e73df;
        }

        .item-2 {
            font-size: 15px;
            font-weight: bold;
            color: #4e73df;
        }

        .item-3 {
            font-size: 15px;
            font-weight: bold;
            background-color: #4e73df;
            color: white;
        }

        .td-item {
            border-bottom: 2px solid #E8E8E8 !important;
        }


        .producto-column {
            width: 20%; /* Ajusta este valor a lo que necesites */
        }

        .modelo-column {
            width: 20%; /* Ajusta este valor a lo que necesites */
        }

        .ram-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }

        .almacenamiento-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }

        .cantidad-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }

        .garantia-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }

        .precio-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }

        .total-column {
            width: 10%; /* Ajusta este valor a lo que necesites */
        }
    </style>
</head>
<body>

    <div class="contenedor">

        <table style="width:100%">
            <tr>
                <td>
                    <img src="~/Content/img/logozm.png" style="width: 220px;" />
                </td>
                <td style="text-align:right">
                    <table style="margin-right:0;margin-left:auto">
                        <tr>
                        <td><p class="title" style="margin-bottom:20px;">Ordenado: @Model.FechaPedido.Value.ToString("dd/MM/yyyy")</p></td>
                        </tr>
                        <tr>
                            <td><p class="title" style="margin-bottom:20px;">Entrega: @Model.FechaEntrega.Value.ToString("dd/MM/yyyy")</p></td>
                        </tr>
                        <tr><td><p class="title2">NÚMERO PEDIDO</p></td></tr>
                        <tr><td>@Model.NumeroFactura</td></tr>
                    </table>
                </td>
            </tr>
        </table>
        <br />
        <table style="width:100%">
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <p class="title">Zona Mobile</p>
                            </td>
                        </tr>
                        <tr>
                            <td><p class="text">Direccion: Plaza Caracol</p></td>
                        </tr>
                        <tr>
                            <td>
                                <p class="text">Correo: ZonaMobile@gmail.com</p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p class="text">Telefono: 2222-2222</p>
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="text-align:right">
                    <table style="margin-right:0;margin-left:auto">
                        <tr>
                            <td><p class="title">CLIENTE</p></td>
                        </tr>
                        <tr>
                            <td><p class="text">@Model.Cliente</p></td>
                        </tr>
                        <tr>
                            <td><p class="text">@Model.Cedula</p></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <br />
        <br />

        <table class="tbproductos" style="width:100%">
            <thead>
                <tr>
                    <th class="tbth producto-column">Producto</th>
                    <th class="tbth modelo-column">Modelo</th>
                    <th class="tbth ram-column">RAM</th>
                    <th class="tbth almacenamiento-column">Almacenamiento</th>
                    <th class="tbth cantidad-column">Cantidad</th>
                    <th class="tbth garantia-column">Garantia</th>
                    <th class="tbth precio-column">Precio</th>
                    <th class="tbth total-column">Total</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.listaProducto)
                {
                    decimal subtotal = 0m;
                    if (item.Cantidad.HasValue && item.Precio.HasValue)
                    {
                        subtotal = item.Cantidad.Value * item.Precio.Value;
                    }

                    totalSinImpuesto += subtotal;

                    <tr>
                        <td class="td-item"><p class="item">@((item.Producto ?? "-") + " - " + (item.Color ?? "-"))</p></td>
                        <td class="td-item"><p class="item">@item.Modelo </p></td>
                        <td class="td-item"><p class="item">@(item.RAM.HasValue ? item.RAM.Value.ToString() + "GB" : "-")</p></td>
                        <td class="td-item"><p class="item">@(item.Almacenamiento.HasValue ? item.Almacenamiento.Value.ToString() + "GB" : "-")</p></td>
                        <td class="td-item"><p class="item">@item.Cantidad</p></td>
                        <td class="td-item"><p class="item">@(item.Garantia.HasValue ? item.Garantia.Value.ToString() : "0") Meses</p></td>
                        <td class="td-item"><p class="item">@(item.Precio.HasValue ? item.Precio.Value.ToString("N2") + "$" : "N/A")</p></td>
                        <td style="background-color:#EDF6F9"><p class="item">@subtotal.ToString("N2") $</p></td>
                    </tr>
                }

                <tr>
                    <td colspan="6" rowspan="3">
                    </td>
                    <td class="td-item">
                        <p class="item-2">SubTotal</p>
                    </td>
                    <td class="item-3">
                        <p>@totalSinImpuesto.ToString("N2")$</p>
                    </td>
                </tr>
                <tr>
                    <td class="td-item">
                        <p class="item-2">IVA</p>
                    </td>
                    <td class="item-3">
                        <p>@((totalSinImpuesto * 0.15m).ToString("N2"))$</p>
                    </td>
                </tr>
                <tr>
                    <td class="item-3">
                        <p>Total</p>
                    </td>
                    <td class="item-3">
                        <p>@((totalSinImpuesto * 0.15m + totalSinImpuesto).ToString("N2"))$</p>
                    </td>
                </tr>

            </tbody>
        </table>

    </div>

</body>
</html>

